#! /bin/bash

DEFAULT_CURRENCY=electroneum
VALID_CURRENCIES="(monero|electroneum|aeon|intensecoin|graft)"

if [ -n "$1" ]; then
  CURRENCY=$1
else
  CURRENCY=$DEFAULT_CURRENCY
fi

shift

CONFIG_DIR=/usr/local/etc/xmr-stak/$CURRENCY

echo $CURRENCY | grep -E $VALID_CURRENCIES > /dev/null

if [ $? -ne 0 ]; then
  echo "Bad crypto: $CURRENCY" 1>&2
  exit 1
fi

echo "Begin mining: $CURRENCY"

cd /usr/local/bin && xmr-stak --cpu $CONFIG_DIR/cpu.txt \
  --nvidia $CONFIG_DIR/nvidia.txt \
  --noAMD \
  --config $CONFIG_DIR/config.txt \
  $@
